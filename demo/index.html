<!--
 * Copyright 2013-2019 EUPHONY. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
  -->

<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title> Euphony for ES6 demo </title>
        <script type='module'>
            import { Euphony } from "../euphony.js"

            var euphy = new Euphony();
            var btnSwt = false;

            window.generateSoundData = function () {
                if (btnSwt) {
                    euphy.stop();
                    document.getElementById("euphy_btn").value = "broadcast";
                    btnSwt = false;
                    console.log("STOP!");
                }
                else {
                    var code = document.getElementById("euphy_text");
                    euphy.setCode(code.value);
                    euphy.play();
                    document.getElementById("euphy_btn").value = "stop";
                    btnSwt = true;
                    console.log("PLAY!");
                }
            }

            let desc = window.document.getElementById("desc");
            if (!euphy.isAudioWorkletAvailable) {
                desc.innerHTML += "AudioWorklet is not supported.<br/>";
            }
            if (!euphy.isSABAvailable) {
                desc.innerHTML += "SharedArrayBuffer is not supported. <br/>";
            }
        </script>
    </head>
    <body>
        <center>
            <h1>
                Hi, this is the Euphony's ES6 demo project.
            </h1>
            <p>
                <input id='euphy_text' class='demo_text_edit' type='text' value='hello, euphony' /> 
                <input id='euphy_btn' class='demo_btn' type='button' value='broadcast' onclick='generateSoundData()' />
            </p>
            <div id='desc'>
                <strong>Description</strong><br />
            </div>
        </center>
    </body>
</html>